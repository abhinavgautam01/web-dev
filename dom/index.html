<html>
    <head>
        <title> DOM </title>
    </head>
    <body>
    <input type="text"></input>
    <button onclick="addTodo()">Add todo!</button>
    <button onclick="deleteFirstTodo()">Delete First todo!</button>
    <button onclick="deleteLastTodo()">Delete Last todo!</button>
    <button onclick="emptyTodoList()">Empty Todo List!</button>
    <div id="todos"></div>
    <script>
        let todos = [];
        function addTodo() {
            if(document.querySelector("input").value){
                todos.push({
                    title: document.querySelector("input").value
                })
            }else{
                alert("enter todo first")
            }
            render();
        }

        function deleteLastTodo() {
            todos.splice(todos.length-1, 1)
            render();
        }
        function deleteLastTodo() {
            todos.splice(todos.length-1, 1)
            render();
        }
        
        function deleteFirstTodo() {
            todos.splice(0, 1)
            render();
        }

        function emptyTodoList(){
            todos.splice(0, todos.length)
            render()
        }

        function deleteTodoAt(index){
            todos.splice(index, 1)
            render()
        }

        function createTodoComponent(todo, index){
            divEl = document.createElement("div")
            spanEl = document.createElement("span") 
            buttonEl = document.createElement("button") 
            spanEl.innerHTML = todo.title
            buttonEl.innerHTML = "Delete"
            buttonEl.setAttribute("onclick", "deleteTodoAt(" + index + ")")
            divEl.appendChild(spanEl);
            divEl.appendChild(buttonEl);
            document.querySelector("#todos").appendChild(divEl)
            return divEl
        }
    
        function render() {
            document.querySelector("#todos").innerHTML = "";
            for(i=0; i<todos.length; i++){
                const element = createTodoComponent(todos[i], i)
                document.querySelector("#todos").appendChild(divEl)
            }
            document.querySelector("input").value = ""
        }
    </script>
    </body>
</html>